@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background: linear-gradient(180deg, #FDF4E6 0%, #E6F0FF 100%);
    min-height: 100dvh;
  }
}

@layer components {
  .chat-container {
    @apply max-w-md mx-auto min-h-screen flex flex-col bg-transparent;
  }

  .messages-container {
    @apply flex-1 overflow-y-auto px-4 pt-20 pb-6 space-y-4;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .messages-container::-webkit-scrollbar {
    display: none;
  }

  .message-bubble {
    @apply max-w-[85%] rounded-3xl px-5 py-4 shadow-sm relative;
  }

  .user-message {
    @apply bg-white text-black ml-auto rounded-br-sm;
  }

  .ai-message {
    @apply bg-white text-black mr-auto rounded-bl-sm border border-gray-100;
  }

  .message-text {
    @apply text-[15.5px] leading-relaxed;
  }

  .file-attachment {
    @apply mt-3 p-3 bg-gray-50 rounded-2xl flex items-center gap-3 text-sm;
  }

  .audio-player {
    @apply mt-4 flex items-center gap-3 bg-gray-100 rounded-full px-4 py-3;
  }

  .input-bar {
    @apply fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t border-gray-200 px-4 py-4;
  }

  .input-field {
    @apply w-full bg-gray-100 rounded-full px-5 py-4 pr-14 text-base placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20;
  }

  /* VoiceCapture specific styles */
  .voice-orb {
    width: 240px;
    height: 240px;
    border-radius: 50%;
    position: relative;
    background: radial-gradient(100% 100% at 20% 20%, rgba(37,224,240,0.8), rgba(80,205,254,0.65) 40%, rgba(198,103,245,0.6) 70%, rgba(244,208,169,0.55));
    filter: blur(0.2px) saturate(110%);
    transition: transform 200ms ease, box-shadow 200ms ease, filter 300ms ease;
    animation: orb-morph 12s ease-in-out infinite;
    backdrop-filter: blur(6px);
  }
  .voice-orb::before,
  .voice-orb::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 50%;
    mix-blend-mode: screen;
    pointer-events: none;
  }
  .voice-orb::before {
    background: radial-gradient(120px 120px at 30% 30%, rgba(80,205,254,0.8), transparent 60%);
    filter: blur(8px);
  }
  .voice-orb::after {
    background: radial-gradient(160px 160px at 70% 70%, rgba(198,103,245,0.7), transparent 60%);
    filter: blur(10px);
  }
  .voice-orb .orb-inner {
    position: absolute;
    inset: 10%;
    border-radius: 50%;
    background: radial-gradient(100% 100% at 50% 50%, rgba(255,255,255,0.35), rgba(255,255,255,0.05));
    filter: blur(6px);
  }
  .voice-orb.recording {
    animation-duration: 6s;
  }
  .voice-orb.success {
    animation: orb-success 800ms ease;
  }
  .voice-orb.error {
    box-shadow: 0 0 60px rgba(255,0,0,0.35) !important;
  }

  .mic-gradient {
    background: radial-gradient(120% 120% at 30% 30%, #1B1B1B, #000000);
  }
}

@keyframes orb-morph {
  0% { border-radius: 57% 43% 60% 40% / 50% 55% 45% 50%; transform: rotate(0deg); }
  25% { border-radius: 48% 52% 42% 58% / 60% 45% 55% 40%; transform: rotate(10deg); }
  50% { border-radius: 60% 40% 55% 45% / 40% 60% 40% 60%; transform: rotate(0deg); }
  75% { border-radius: 52% 48% 40% 60% / 55% 45% 55% 45%; transform: rotate(-8deg); }
  100% { border-radius: 57% 43% 60% 40% / 50% 55% 45% 50%; transform: rotate(0deg); }
}

@keyframes orb-success {
  0% { transform: scale(1); }
  40% { transform: scale(0.9); }
  100% { transform: scale(1); }
}
